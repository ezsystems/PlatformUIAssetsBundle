/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*
 UriTemplate Copyright (c) 2012-2013 Franz Antesberger. All Rights Reserved.
 Available via the MIT license.
*/

/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

(function(e,t){typeof define=="function"&&define.amd?define(t):e.libGlobalName=t()})(this,function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("almond",function(){}),n("structures/CAPIError",[],function(){var e=function(e,t){this.name="CAPIError",this.message=e,this.details=t};return e.prototype=new Error,e.prototype.constructor=e,e}),n("storages/LocalStorage",["structures/CAPIError"],function(e){var t=function(){if(!t.isCompatible())throw new e("LocalStorage abstraction can not be used: window.localStorage is not available.");this._storage=window.localStorage};return t.prototype.getItem=function(e){return JSON.parse(this._storage.getItem(e))},t.prototype.setItem=function(e,t){this._storage.setItem(e,JSON.stringify(t))},t.prototype.removeItem=function(e){this._storage.removeItem(e)},t.isCompatible=function(){var e="__featuredetection__";if(!window.localStorage||!window.localStorage.setItem)return!1;try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(t){return!1}},t}),n("authAgents/SessionAuthAgent",["structures/CAPIError","storages/LocalStorage"],function(e,t){var n=function(n,r){this._CAPI=null,this._login="",this._password="",this._storage=r||new t;if(n)if(n.login&&n.password)this.setCredentials(n);else{if(!(n.csrfToken&&n.identifier&&n.name&&n.href))throw new e("Invalid authInfo parameter");this._storeSessionInfo(n)}},r={GET:1,HEAD:1,OPTIONS:1,TRACE:1};return n.KEY_SESSION_NAME="ezpRestClient.sessionName",n.KEY_SESSION_ID="ezpRestClient.sessionId",n.KEY_SESSION_HREF="ezpRestClient.sessionHref",n.KEY_CSRF_TOKEN="ezpRestClient.csrfToken",n.prototype.isLoggedIn=function(e){var t=this,r=this._CAPI.getUserService(),i=this._storage.getItem(n.KEY_SESSION_ID);if(i===null){e(!0,!1);return}r.refreshSession(i,function(n,r){n&&t._resetStorage(),e(n,r)})},n.prototype.ensureAuthentication=function(e){if(this._storage.getItem(n.KEY_SESSION_ID)!==null){e(!1,!0);return}var t=this,r=this._CAPI.getUserService(),i=r.newSessionCreateStruct(this._login,this._password);r.createSession(i,function(n,r){var i;if(n){e(n,r);return}i=r.document.Session,t._storeSessionInfo({name:i.name,href:i._href,identifier:i.identifier,csrfToken:i.csrfToken}),e(!1,r)})},n.prototype.logIn=function(e){var t=this;this._storage.getItem(n.KEY_SESSION_ID)!==null?this.logOut(function(n,r){t.ensureAuthentication(e)}):this.ensureAuthentication(e)},n.prototype.authenticateRequest=function(e,t){var i=this._storage.getItem(n.KEY_CSRF_TOKEN);r[e.method.toUpperCase()]!==1&&i!==null&&(e.headers["X-CSRF-Token"]=i),t(!1,e)},n.prototype.logOut=function(e){var t=this._CAPI.getUserService(),r=this._storage.getItem(n.KEY_SESSION_HREF),i=this;if(r===null){e(!1,!0);return}t.deleteSession(r,function(t,n){t||i._resetStorage(),e(t,n)})},n.prototype.setCAPI=function(e){this._CAPI=e},n.prototype.setCredentials=function(e){this._login=e.login,this._password=e.password},n.prototype._resetStorage=function(){this._storage.removeItem(n.KEY_SESSION_NAME),this._storage.removeItem(n.KEY_SESSION_ID),this._storage.removeItem(n.KEY_SESSION_HREF),this._storage.removeItem(n.KEY_CSRF_TOKEN)},n.prototype._storeSessionInfo=function(e){this._storage.setItem(n.KEY_SESSION_NAME,e.name),this._storage.setItem(n.KEY_SESSION_HREF,e.href),this._storage.setItem(n.KEY_SESSION_ID,e.identifier),this._storage.setItem(n.KEY_CSRF_TOKEN,e.csrfToken)},n}),n("authAgents/HttpBasicAuthAgent",[],function(){var e=function(e){this._login="",this._password="",e&&this.setCredentials(e)};return e.prototype.ensureAuthentication=function(e){e(!1,!0)},e.prototype.authenticateRequest=function(e,t){e.httpBasicAuth=!0,e.login=this._login,e.password=this._password,t(!1,e)},e.prototype.logOut=function(e){e(!1,!0)},e.prototype.isLoggedIn=function(e){if(!this._login||!this._password){e(!0,!1);return}this._CAPI.getContentService().loadRoot(e)},e.prototype.logIn=function(e){this.isLoggedIn(e)},e.prototype.setCAPI=function(e){this._CAPI=e},e.prototype.setCredentials=function(e){this._login=e.login,this._password=e.password},e}),n("structures/Response",[],function(){var e=function(e){this.body="",this.document=null;for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);if(this.body)try{this.document=JSON.parse(this.body)}catch(n){this.document=null}return this};return e}),n("structures/Request",[],function(){var e=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this};return e}),n("ConnectionManager",["structures/Response","structures/Request","structures/CAPIError"],function(e,t,n){var r=function(e,t,n){this._endPointUrl=e,this._authenticationAgent=t,this._connectionFactory=n,this._requestsQueue=[],this._authInProgress=!1,this.logRequests=!1};return r.prototype.request=function(e,r,i,s,o){var u=this,a,f,l="GET",c="/",h="",p={};arguments.length<5&&(typeof e=="function"?(o=e,e=l,r=c,i=h,s=p):typeof r=="function"?(o=r,r=c,i=h,s=p):typeof i=="function"?(o=i,i=h,s=p):(o=s,s=p)),a=new t({method:e,url:this._endPointUrl+r,body:i,headers:s}),this._requestsQueue.push(a);if(!this._authInProgress||this._requestsQueue.length===1)this._authInProgress=!0,this._authenticationAgent.ensureAuthentication(function(e,t){if(e){u._authInProgress=!1,o(e,!1);return}u._authInProgress=!1;while(f=u._requestsQueue.shift())u._authenticationAgent.authenticateRequest(f,function(e,t){if(e){o(new n("An error occurred during request authentication.",{request:f}),!1);return}u.logRequests&&console.dir(a),u._connectionFactory.createConnection().execute(t,o)})})},r.prototype.notAuthorizedRequest=function(e,n,r,i,s){var o,u=this,a="GET",f="/",l="",c={};arguments.length<5&&(typeof e=="function"?(s=e,e=a,n=f,r=l,i=c):typeof n=="function"?(s=n,n=f,r=l,i=c):typeof r=="function"?(s=r,r=l,i=c):(s=i,i=c)),o=new t({method:e,url:this._endPointUrl+n,body:r,headers:i}),this.logRequests&&console.dir(o),this._authenticationAgent.authenticateRequest(o,function(e,t){u._connectionFactory.createConnection().execute(t,s)})},r}),n("ConnectionFeatureFactory",[],function(){var e=function(e){this.connectionList=e,this.defaultFactory=function(e){return new e}};return e.prototype.createConnection=function(){var e=null,t;for(t=0;t<this.connectionList.length;++t)if(this.connectionList[t].connection.isCompatible()){this.connectionList[t].factory?e=this.connectionList[t].factory(this.connectionList[t].connection):e=this.defaultFactory(this.connectionList[t].connection);break}return e},e}),n("connections/XmlHttpRequestConnection",["structures/Response","structures/CAPIError"],function(e,t){var n=function(){this._xhr=new XMLHttpRequest};return n.prototype.execute=function(n,r){var i=this._xhr,s;i.onreadystatechange=function(){var s;if(i.readyState!=4)return;s=new e({status:i.status,headers:i.getAllResponseHeaders(),body:i.responseText});if(i.status>=400){r(new t("Connection error : "+i.status+".",{request:n}),s);return}r(!1,s)},n.httpBasicAuth?i.open(n.method,n.url,!0,n.login,n.password):i.open(n.method,n.url,!0);for(s in n.headers)n.headers.hasOwnProperty(s)&&i.setRequestHeader(s,n.headers[s]);i.send(n.body)},n.isCompatible=function(){return!!window.XMLHttpRequest},n}),n("connections/MicrosoftXmlHttpRequestConnection",["structures/Response","structures/CAPIError"],function(e,t){var n=function(){this._xhr=new ActiveXObject("Microsoft.XMLHTTP")};return n.prototype.execute=function(n,r){var i=this._xhr,s;i.onreadystatechange=function(){var s;if(i.readyState!=4)return;s=new e({status:i.status,headers:i.getAllResponseHeaders(),body:i.responseText});if(i.status>=400){r(new t("Connection error : "+i.status+".",{request:n}),s);return}r(!1,s)},n.httpBasicAuth?i.open(n.method,n.url,!0,n.login,n.password):i.open(n.method,n.url,!0);for(s in n.headers)n.headers.hasOwnProperty(s)&&i.setRequestHeader(s,n.headers[s]);i.send(n.body)},n.isCompatible=function(){return!!window.ActiveXObject},n}),n("services/DiscoveryService",["structures/CAPIError"],function(e){var t=function(e,t){this._connectionManager=t,this._rootPath=e,this._cacheObject={}};return t.prototype.getInfoObject=function(t,n){var r=this;if(!this._cacheObject.Root){this._discoverRoot(this._rootPath,function(e,i){if(e){n(e,i);return}r.getInfoObject(t,n)});return}this._cacheObject.Root.hasOwnProperty(t)?n(!1,this._cacheObject.Root[t]):n(new e("Discover service failed to find cached object with name '"+t+"'.",{name:t}),!1)},t.prototype._discoverRoot=function(e,t){var n=this;this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Root+json"},function(e,r){if(e){t(e,r);return}n._copyToCache(r.document),t(!1,!0)})},t.prototype._copyToCache=function(e){var t;for(t in e)this._cacheObject[t]=e[t]},t}),n("structures/ContentCreateStruct",[],function(){var e=function(e,t,n){var r=JSON.parse(JSON.stringify(new Date));return this.body={},this.body.ContentCreate={},this.body.ContentCreate.ContentType={_href:e},this.body.ContentCreate.mainLanguageCode=n,this.body.ContentCreate.LocationCreate=t.body.LocationCreate,this.body.ContentCreate.Section=null,this.body.ContentCreate.alwaysAvailable="true",this.body.ContentCreate.remoteId=null,this.body.ContentCreate.modificationDate=r,this.body.ContentCreate.fields={},this.body.ContentCreate.fields.field=[],this.headers={Accept:"application/vnd.ez.api.Content+json","Content-Type":"application/vnd.ez.api.ContentCreate+json"},this};return e.prototype.addField=function(e,t){return this.body.ContentCreate.fields.field.push({fieldDefinitionIdentifier:e,fieldValue:t}),this},e}),n("structures/ContentUpdateStruct",[],function(){var e=function(e){var t=JSON.parse(JSON.stringify(new Date));return this.body={},this.body.VersionUpdate={},this.body.VersionUpdate.modificationDate=t,this.body.VersionUpdate.initialLanguageCode=e,this.body.VersionUpdate.fields={field:[]},this.headers={Accept:"application/vnd.ez.api.Version+json","Content-Type":"application/vnd.ez.api.VersionUpdate+json"},this};return e}),n("structures/SectionInputStruct",[],function(){var e=function(e,t){return this.body={},this.body.SectionInput={},this.body.SectionInput.identifier=e,this.body.SectionInput.name=t,this.headers={},this.headers.Accept="application/vnd.ez.api.Section+json",this.headers["Content-Type"]="application/vnd.ez.api.SectionInput+json",this};return e}),n("structures/LocationCreateStruct",[],function(){var e=function(e){return this.body={},this.body.LocationCreate={},this.body.LocationCreate.ParentLocation={_href:e},this.body.LocationCreate.sortField="PATH",this.body.LocationCreate.sortOrder="ASC",this.headers={Accept:"application/vnd.ez.api.Location+json","Content-Type":"application/vnd.ez.api.LocationCreate+json"},this};return e}),n("structures/LocationUpdateStruct",[],function(){var e=function(){return this.body={},this.body.LocationUpdate={},this.body.LocationUpdate.sortField="PATH",this.body.LocationUpdate.sortOrder="ASC",this.headers={Accept:"application/vnd.ez.api.Location+json","Content-Type":"application/vnd.ez.api.LocationUpdate+json"},this};return e}),n("structures/ContentMetadataUpdateStruct",[],function(){var e=function(e){var t=JSON.parse(JSON.stringify(new Date));return this.body={},this.body.ContentUpdate={},this.body.ContentUpdate.MainLanguageCode=e,this.body.ContentUpdate.Section=null,this.body.ContentUpdate.alwaysAvailable="true",this.body.ContentUpdate.remoteId=null,this.body.ContentUpdate.modificationDate=t,this.body.ContentUpdate.publishDate=null,this.headers={Accept:"application/vnd.ez.api.ContentInfo+json","Content-Type":"application/vnd.ez.api.ContentUpdate+json"},this};return e}),n("structures/ObjectStateGroupCreateStruct",[],function(){var e=function(e,t,n){return this.body={},this.body.ObjectStateGroupCreate={},this.body.ObjectStateGroupCreate.identifier=e,this.body.ObjectStateGroupCreate.defaultLanguageCode=t,this.body.ObjectStateGroupCreate.names={},this.body.ObjectStateGroupCreate.names.value=n,this.body.ObjectStateGroupCreate.descriptions={},this.body.ObjectStateGroupCreate.descriptions.value=[],this.headers={},this.headers.Accept="application/vnd.ez.api.ObjectStateGroup+json",this.headers["Content-Type"]="application/vnd.ez.api.ObjectStateGroupCreate+json",this};return e}),n("structures/ObjectStateGroupUpdateStruct",[],function(){var e=function(){return this.body={},this.body.ObjectStateGroupUpdate={},this.headers={},this.headers.Accept="application/vnd.ez.api.ObjectStateGroup+json",this.headers["Content-Type"]="application/vnd.ez.api.ObjectStateGroupUpdate+json",this};return e}),n("structures/ObjectStateCreateStruct",[],function(){var e=function(e,t,n,r,i){return this.body={},this.body.ObjectStateCreate={},this.body.ObjectStateCreate.identifier=e,this.body.ObjectStateCreate.defaultLanguageCode=t,this.body.ObjectStateCreate.priority=n,this.body.ObjectStateCreate.names={},this.body.ObjectStateCreate.names.value=r,this.body.ObjectStateCreate.descriptions={},this.body.ObjectStateCreate.descriptions.value=i,this.headers={},this.headers.Accept="application/vnd.ez.api.ObjectState+json",this.headers["Content-Type"]="application/vnd.ez.api.ObjectStateCreate+json",this};return e}),n("structures/ObjectStateUpdateStruct",[],function(){var e=function(){return this.body={},this.body.ObjectStateUpdate={},this.headers={},this.headers.Accept="application/vnd.ez.api.ObjectState+json",this.headers["Content-Type"]="application/vnd.ez.api.ObjectStateUpdate+json",this};return e}),n("structures/ViewCreateStruct",[],function(){var e=function(e){return this.body={},this.body.ViewInput={},this.body.ViewInput.identifier=e,this.body.ViewInput["public"]=!1,this.body.ViewInput.Query={},this.body.ViewInput.Query.Criteria={},this.body.ViewInput.Query.offset=0,this.body.ViewInput.Query.FacetBuilders={},this.body.ViewInput.Query.SortClauses={},this.body.ViewInput.Query.spellcheck=!1,this.headers={Accept:"application/vnd.ez.api.View+json","Content-Type":"application/vnd.ez.api.ViewInput+json"},this};return e}),n("structures/UrlAliasCreateStruct",[],function(){var e=function(e,t,n){return this.body={},this.body.UrlAliasCreate={},this.body.UrlAliasCreate._type="RESOURCE",this.body.UrlAliasCreate.resource=t,this.body.UrlAliasCreate.path=n,this.body.UrlAliasCreate.alwaysAvailable="false",this.body.UrlAliasCreate.forward="false",this.body.UrlAliasCreate.languageCode=e,this.headers={},this.headers.Accept="application/vnd.ez.api.UrlAlias+json",this.headers["Content-Type"]="application/vnd.ez.api.UrlAliasCreate+json",this};return e}),n("structures/UrlWildcardCreateStruct",[],function(){var e=function(e,t,n){return this.body={},this.body.UrlWildcardCreate={},this.body.UrlWildcardCreate.sourceUrl=e,this.body.UrlWildcardCreate.destinationUrl=t,this.body.UrlWildcardCreate.forward=n,this.headers={},this.headers.Accept="application/vnd.ez.api.UrlWildcard+json",this.headers["Content-Type"]="application/vnd.ez.api.UrlWildcardCreate+json",this};return e}),n("structures/RelationCreateStruct",[],function(){var e=function(e){return this.body={},this.body.RelationCreate={},this.body.RelationCreate.Destination={_href:e},this.headers={},this.headers.Accept="application/vnd.ez.api.Relation+json",this.headers["Content-Type"]="application/vnd.ez.api.RelationCreate+json",this};return e}),function(e){function a(e){var t;if(e===null||e===undefined)return!1;if(n.isArray(e))return e.length>0;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return!0;for(t in e)if(e.hasOwnProperty(t)&&a(e[t]))return!0;return!1}var t=function(){function e(e){this.options=e}return e.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},e}(),n=function(){function e(e){return Object.prototype.toString.apply(e)==="[object Array]"}function t(e){return Object.prototype.toString.apply(e)==="[object String]"}function n(e){return Object.prototype.toString.apply(e)==="[object Number]"}function r(e){return Object.prototype.toString.apply(e)==="[object Boolean]"}function i(e,t){var n="",r=!0,i;for(i=0;i<e.length;i+=1)r?r=!1:n+=t,n+=e[i];return n}function s(e,t){var n=[],r=0;for(;r<e.length;r+=1)n.push(t(e[r]));return n}function o(e,t){var n=[],r=0;for(;r<e.length;r+=1)t(e[r])&&n.push(e[r]);return n}function u(e){if(typeof e!="object"||e===null)return e;Object.freeze(e);var t,n;for(n in e)e.hasOwnProperty(n)&&(t=e[n],typeof t=="object"&&a(t));return e}function a(e){return typeof Object.freeze=="function"?u(e):e}return{isArray:e,isString:t,isNumber:n,isBoolean:r,join:i,map:s,filter:o,deepFreeze:a}}(),r=function(){function e(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function t(e){return e>="0"&&e<="9"}function n(e){return t(e)||e>="a"&&e<="f"||e>="A"&&e<="F"}return{isAlpha:e,isDigit:t,isHexDigit:n}}(),i=function(){function t(t){var n="",r=e.encode(t),i,s;for(s=0;s<r.length;s+=1)i=r.charCodeAt(s),n+="%"+(i<16?"0":"")+i.toString(16).toUpperCase();return n}function n(e,t){return e.charAt(t)==="%"&&r.isHexDigit(e.charAt(t+1))&&r.isHexDigit(e.charAt(t+2))}function i(e,t){return parseInt(e.substr(t,2),16)}function s(t){if(!n(t,0))return!1;var r=i(t,1),s=e.numBytes(r);if(s===0)return!1;for(var o=1;o<s;o+=1)if(!n(t,3*o)||!e.isValidFollowingCharCode(i(t,3*o+1)))return!1;return!0}function o(t,r){var s=t.charAt(r);if(!n(t,r))return s;var o=i(t,r+1),u=e.numBytes(o);if(u===0)return s;for(var a=1;a<u;a+=1)if(!n(t,r+3*a)||!e.isValidFollowingCharCode(i(t,r+3*a+1)))return s;return t.substr(r,3*u)}var e={encode:function(e){return unescape(encodeURIComponent(e))},numBytes:function(e){return e<=127?1:194<=e&&e<=223?2:224<=e&&e<=239?3:240<=e&&e<=244?4:0},isValidFollowingCharCode:function(e){return 128<=e&&e<=191}};return{encodeCharacter:t,isPctEncoded:s,pctCharAt:o}}(),s=function(){function e(e){return r.isAlpha(e)||r.isDigit(e)||e==="_"||i.isPctEncoded(e)}function t(e){return r.isAlpha(e)||r.isDigit(e)||e==="-"||e==="."||e==="_"||e==="~"}function n(e){return e===":"||e==="/"||e==="?"||e==="#"||e==="["||e==="]"||e==="@"||e==="!"||e==="$"||e==="&"||e==="("||e===")"||e==="*"||e==="+"||e===","||e===";"||e==="="||e==="'"}return{isVarchar:e,isUnreserved:t,isReserved:n}}(),o=function(){function e(e,t){var n="",r,o="";if(typeof e=="number"||typeof e=="boolean")e=e.toString();for(r=0;r<e.length;r+=o.length)o=e.charAt(r),n+=s.isUnreserved(o)||t&&s.isReserved(o)?o:i.encodeCharacter(o);return n}function t(t){return e(t,!0)}function n(e,t){var n=i.pctCharAt(e,t);return n.length>1?n:s.isReserved(n)||s.isUnreserved(n)?n:i.encodeCharacter(n)}function r(e){var t="",n,r="";for(n=0;n<e.length;n+=r.length)r=i.pctCharAt(e,n),r.length>1?t+=r:t+=s.isReserved(r)||s.isUnreserved(r)?r:i.encodeCharacter(r);return t}return{encode:e,encodePassReserved:t,encodeLiteral:r,encodeLiteralCharacter:n}}(),u=function(){function t(t){e[t]={symbol:t,separator:t==="?"?"&":t===""||t==="+"||t==="#"?",":t,named:t===";"||t==="&"||t==="?",ifEmpty:t==="&"||t==="?"?"=":"",first:t==="+"?"":t,encode:t==="+"||t==="#"?o.encodePassReserved:o.encode,toString:function(){return this.symbol}}}var e={};return t(""),t("+"),t("#"),t("."),t("/"),t(";"),t("?"),t("&"),{valueOf:function(t){return e[t]?e[t]:"=,!@|".indexOf(t)>=0?null:e[""]}}}(),f=function(){function e(e){this.literal=o.encodeLiteral(e)}return e.prototype.expand=function(){return this.literal},e.prototype.toString=e.prototype.expand,e}(),l=function(){function e(e){function d(){var n=e.substring(f,h);if(n.length===0)throw new t({expressionText:e,message:"a varname must be specified",position:h});a={varname:n,exploded:!1,maxLength:null},f=null}function v(){if(l===h)throw new t({expressionText:e,message:"after a ':' you have to specify the length",position:h});a.maxLength=parseInt(e.substring(l,h),10),l=null}var n,o=[],a=null,f=null,l=null,h,p="";n=function(n){var r=u.valueOf(n);if(r===null)throw new t({expressionText:e,message:"illegal use of reserved operator",position:h,operator:n});return r}(e.charAt(0)),h=n.symbol.length,f=h;for(;h<e.length;h+=p.length){p=i.pctCharAt(e,h);if(f!==null){if(p==="."){if(f===h)throw new t({expressionText:e,message:"a varname MUST NOT start with a dot",position:h});continue}if(s.isVarchar(p))continue;d()}if(l!==null){if(h===l&&p==="0")throw new t({expressionText:e,message:"A :prefix must not start with digit 0",position:h});if(r.isDigit(p)){if(h-l>=4)throw new t({expressionText:e,message:"A :prefix must have max 4 digits",position:h});continue}v()}if(p===":"){if(a.maxLength!==null)throw new t({expressionText:e,message:"only one :maxLength is allowed per varspec",position:h});if(a.exploded)throw new t({expressionText:e,message:"an exploeded varspec MUST NOT be varspeced",position:h});l=h+1;continue}if(p==="*"){if(a===null)throw new t({expressionText:e,message:"exploded without varspec",position:h});if(a.exploded)throw new t({expressionText:e,message:"exploded twice",position:h});if(a.maxLength)throw new t({expressionText:e,message:"an explode (*) MUST NOT follow to a prefix",position:h});a.exploded=!0;continue}if(p===","){o.push(a),a=null,f=h+1;continue}throw new t({expressionText:e,message:"illegal character",character:p,position:h})}return f!==null&&d(),l!==null&&v(),o.push(a),new c(e,n,o)}function n(n){var r,i,s=[],o=null,u=0;for(r=0;r<n.length;r+=1){i=n.charAt(r);if(u!==null){if(i==="}")throw new t({templateText:n,message:"unopened brace closed",position:r});i==="{"&&(u<r&&s.push(new f(n.substring(u,r))),u=null,o=r);continue}if(o!==null){if(i==="{")throw new t({templateText:n,message:"brace already opened",position:r});if(i==="}"){if(o+1===r)throw new t({templateText:n,message:"empty braces",position:o});try{s.push(e(n.substring(o+1,r)))}catch(a){throw a.prototype===t.prototype?new t({templateText:n,message:a.options.message,position:o+a.options.position,details:a.options}):a}o=null,u=r+1}continue}throw new Error("reached unreachable code")}if(o!==null)throw new t({templateText:n,message:"unclosed brace",position:o});return u<n.length&&s.push(new f(n.substr(u))),new h(n,s)}return n}(),c=function(){function e(e){return JSON&&JSON.stringify?JSON.stringify(e):e}function t(e){if(!a(e))return!0;if(n.isString(e))return e==="";if(n.isNumber(e)||n.isBoolean(e))return!1;if(n.isArray(e))return e.length===0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function r(e){var t=[],n;for(n in e)e.hasOwnProperty(n)&&t.push({name:n,value:e[n]});return t}function i(e,t,n){this.templateText=e,this.operator=t,this.varspecs=n}function s(e,t,n){var r="";n=n.toString();if(t.named){r+=o.encodeLiteral(e.varname);if(n==="")return r+=t.ifEmpty,r;r+="="}return e.maxLength!==null&&(n=n.substr(0,e.maxLength)),r+=t.encode(n),r}function u(e){return a(e.value)}function f(e,i,s){var f=[],l="";if(i.named){l+=o.encodeLiteral(e.varname);if(t(s))return l+=i.ifEmpty,l;l+="="}return n.isArray(s)?(f=s,f=n.filter(f,a),f=n.map(f,i.encode),l+=n.join(f,",")):(f=r(s),f=n.filter(f,u),f=n.map(f,function(e){return i.encode(e.name)+","+i.encode(e.value)}),l+=n.join(f,",")),l}function l(e,i,s){var f=n.isArray(s),l=[];return f?(l=s,l=n.filter(l,a),l=n.map(l,function(n){var r=o.encodeLiteral(e.varname);return t(n)?r+=i.ifEmpty:r+="="+i.encode(n),r})):(l=r(s),l=n.filter(l,u),l=n.map(l,function(e){var n=o.encodeLiteral(e.name);return t(e.value)?n+=i.ifEmpty:n+="="+i.encode(e.value),n})),n.join(l,i.separator)}function c(e,t){var i=[],s="";return n.isArray(t)?(i=t,i=n.filter(i,a),i=n.map(i,e.encode),s+=n.join(i,e.separator)):(i=r(t),i=n.filter(i,function(e){return a(e.value)}),i=n.map(i,function(t){return e.encode(t.name)+"="+e.encode(t.value)}),s+=n.join(i,e.separator)),s}return i.prototype.toString=function(){return this.templateText},i.prototype.expand=function(r){var i=[],o,u,h,p,d=!1,v=this.operator;for(o=0;o<this.varspecs.length;o+=1){u=this.varspecs[o],h=r[u.varname];if(h===null||h===undefined)continue;u.exploded&&(d=!0),p=n.isArray(h);if(typeof h=="string"||typeof h=="number"||typeof h=="boolean")i.push(s(u,v,h));else{if(u.maxLength&&a(h))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+e(h));u.exploded?a(h)&&(v.named?i.push(l(u,v,h)):i.push(c(v,h))):(v.named||!t(h))&&i.push(f(u,v,h))}}return i.length===0?"":v.first+n.join(i,v.separator)},i}(),h=function(){function e(e,t){this.templateText=e,this.expressions=t,n.deepFreeze(this)}return e.prototype.toString=function(){return this.templateText},e.prototype.expand=function(e){var t,n="";for(t=0;t<this.expressions.length;t+=1)n+=this.expressions[t].expand(e);return n},e.parse=l,e.UriTemplateError=t,e}();e(h)}(function(e){typeof module!="undefined"?module.exports=e:typeof n=="function"?n("uritemplate",[],function(){return e}):typeof window!="undefined"?window.UriTemplate=e:global.UriTemplate=e}),n("utils/uriparse",["uritemplate"],function(e){var t=function(t,n){return e.parse(t).expand(n)};return t}),n("services/ContentService",["structures/ContentCreateStruct","structures/ContentUpdateStruct","structures/SectionInputStruct","structures/LocationCreateStruct","structures/LocationUpdateStruct","structures/ContentMetadataUpdateStruct","structures/ObjectStateGroupCreateStruct","structures/ObjectStateGroupUpdateStruct","structures/ObjectStateCreateStruct","structures/ObjectStateUpdateStruct","structures/ViewCreateStruct","structures/UrlAliasCreateStruct","structures/UrlWildcardCreateStruct","structures/RelationCreateStruct","utils/uriparse"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=function(e,t,n){this._connectionManager=e,this._discoveryService=t,this._rootPath=n};return v.prototype.loadRoot=function(e){this._connectionManager.request("GET",this._rootPath,"",{Accept:"application/vnd.ez.api.Root+json"},e)},v.prototype.newContentUpdateStruct=function(e){return new t(e)},v.prototype.newContentMetadataUpdateStruct=function(e){return new s(e)},v.prototype.newContentCreateStruct=function(t,n,r){return new e(t,n,r)},v.prototype.newSectionInputStruct=function(e,t){return new n(e,t)},v.prototype.newLocationCreateStruct=function(e){return new r(e)},v.prototype.newLocationUpdateStruct=function(){return new i},v.prototype.newViewCreateStruct=function(e){return new l(e)},v.prototype.newRelationCreateStruct=function(e){return new p(e)},v.prototype.newObjectStateGroupCreateStruct=function(e,t,n){return new o(e,t,n)},v.prototype.newObjectStateGroupUpdateStruct=function(){return new u},v.prototype.newObjectStateCreateStruct=function(e,t,n,r,i){return new a(e,t,n,r,i)},v.prototype.newObjectStateUpdateStruct=function(){return new f},v.prototype.newUrlAliasCreateStruct=function(e,t,n){return new c(e,t,n)},v.prototype.newUrlWildcardCreateStruct=function(e,t,n){return new h(e,t,n)},v.prototype.createSection=function(e,t){var n=this;this._discoveryService.getInfoObject("sections",function(r,i){if(r){t(r,i);return}n._connectionManager.request("POST",i._href,JSON.stringify(e.body),e.headers,t)})},v.prototype.updateSection=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},v.prototype.loadSections=function(e){var t=this;this._discoveryService.getInfoObject("sections",function(n,r){if(n){e(n,r);return}t._connectionManager.request("GET",r._href,"",{Accept:r["_media-type"]},e)})},v.prototype.loadSection=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Section+json"},t)},v.prototype.deleteSection=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},v.prototype.createContent=function(e,t){var n=this;this._discoveryService.getInfoObject("content",function(r,i){if(r){t(r,i);return}n._connectionManager.request("POST",i._href,JSON.stringify(e.body),e.headers,t)})},v.prototype.updateContentMetadata=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},v.prototype.loadContentByRemoteId=function(e,t){var n=this;this._discoveryService.getInfoObject("contentByRemoteId",function(r,i){if(r){t(r,i);return}n._connectionManager.request("GET",d(i._href,{remoteId:e}),"",{Accept:"application/vnd.ez.api.ContentInfo+json"},t)})},v.prototype.loadContentInfo=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ContentInfo+json"},t)},v.prototype.loadContentInfoAndCurrentVersion=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Content+json"},t)},v.prototype.deleteContent=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},v.prototype.copyContent=function(e,t,n){this._connectionManager.request("COPY",e,"",{Destination:t},n)},v.prototype.loadCurrentVersion=function(e,t){var n=this;this.loadContentInfo(e,function(e,r){if(e){t(e,r);return}var i=r.document.Content.CurrentVersion;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},v.prototype.loadContent=function(e,t,n,r,i){var s="",o="",u="";arguments.length<5&&(typeof t=="function"?(i=t,t=s,n=o,r=u):typeof n=="function"?(i=n,n=o,r=u):(i=r,r=u)),t=t?"?fields="+t:"",n=n?'&responseGroups="'+n+'"':"",r=r?"&languages="+r:"",this._connectionManager.request("GET",e+t+n+r,"",{Accept:"application/vnd.ez.api.Version+json"},i)},v.prototype.loadVersions=function(e,t){var n=this;this.loadContentInfo(e,function(e,r){if(e){t(e,r);return}var i=r.document.Content.Versions;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},v.prototype.updateContent=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},v.prototype.createContentDraft=function(e,t,n){var r=this;this.loadContentInfo(e,function(e,i){var s="";if(e){n(e,i);return}typeof t!="function"?s=i.document.Content.Versions._href+"/"+t:(n=t,s=i.document.Content.CurrentVersion._href),r._connectionManager.request("COPY",s,"",{Accept:"application/vnd.ez.api.Version+json"},n)})},v.prototype.deleteVersion=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},v.prototype.publishVersion=function(e,t){this._connectionManager.request("PUBLISH",e,"",{},t)},v.prototype.createLocation=function(e,t,n){var r=this;this.loadContentInfo(e,function(e,i){if(e){n(e,i);return}var s=i.document.Content.Locations;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},v.prototype.loadLocations=function(e,t){var n=this;this.loadContentInfo(e,function(e,r){if(e){t(e,r);return}var i=r.document.Content.Locations;n._connectionManager.request("GET",i._href,"",{Accept:"application/vnd.ez.api.LocationList+json"},t)})},v.prototype.loadLocation=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Location+json"},t)},v.prototype.loadLocationByRemoteId=function(e,t){var n=this;this._discoveryService.getInfoObject("locationByRemoteId",function(r,i){if(r){t(r,i);return}n._connectionManager.request("GET",d(i._href,{remoteId:e}),"",{Accept:"application/vnd.ez.api.Location+json"},t)})},v.prototype.updateLocation=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},v.prototype.loadLocationChildren=function(e,t,n,r){var i=this,s=-1,o=0;arguments.length<4&&(typeof t=="function"?(r=t,t=s,n=o):(r=n,n=o)),this.loadLocation(e,function(e,s){if(e){r(e,s);return}var o=s.document.Location;i._connectionManager.request("GET",o.Children._href+"?offset="+n+"&limit="+t,"",{Accept:o.Children["_media-type"]},r)})},v.prototype.copySubtree=function(e,t,n){this._connectionManager.request("COPY",e,"",{Destination:t},n)},v.prototype.moveSubtree=function(e,t,n){this._connectionManager.request("MOVE",e,"",{Destination:t},n)},v.prototype.swapLocation=function(e,t,n){this._connectionManager.request("SWAP",e,"",{Destination:t},n)},v.prototype.deleteLocation=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},v.prototype.createView=function(e,t){var n=this;this._discoveryService.getInfoObject("views",function(r,i){if(r){t(r,i);return}n._connectionManager.request("POST",i._href,JSON.stringify(e.body),e.headers,t)})},v.prototype.loadRelations=function(e,t,n,r){var i=this,s=-1,o=0;arguments.length<4&&(typeof t=="function"?(r=t,t=s,n=o):(r=n,n=o)),this.loadContent(e,{},function(e,s){if(e){r(e,s);return}var o=s.document.Version;i._connectionManager.request("GET",o.Relations._href+"?offset="+n+"&limit="+t,"",{Accept:o.Relations["_media-type"]},r)})},v.prototype.loadCurrentRelations=function(e,t,n,r){var i=this,s=-1,o=0;arguments.length<4&&(typeof t=="function"?(r=t,t=s,n=o):(r=n,n=o)),this.loadCurrentVersion(e,function(e,s){if(e){r(e,s);return}var o=s.document.Version;i._connectionManager.request("GET",o.Relations._href+"?offset="+n+"&limit="+t,"",{Accept:o.Relations["_media-type"]},r)})},v.prototype.loadRelation=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Relation+json"},t)},v.prototype.addRelation=function(e,t,n){var r=this;this.loadContent(e,{},function(e,i){if(e){n(e,i);return}var s=i.document.Version;r._connectionManager.request("POST",s.Relations._href,JSON.stringify(t.body),t.headers,n)})},v.prototype.deleteRelation=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},v.prototype.loadTrashItems=function(e,t,n){var r=this,i=-1,s=0;arguments.length<3&&(typeof e=="function"?(n=e,e=i,t=s):(n=t,t=s)),this._discoveryService.getInfoObject("trash",function(i,s){if(i){n(i,s);return}r._connectionManager.request("GET",s._href+"?offset="+t+"&limit="+e,"",{Accept:s["_media-type"]},n)})},v.prototype.loadTrashItem=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.TrashItem+json"},t)},v.prototype.recover=function(e,t,n){var r={Accept:"application/vnd.ez.api.TrashItem+json"};typeof t!="function"?r.Destination=t:n=t,this._connectionManager.request("MOVE",e,"",r,n)},v.prototype.deleteTrashItem=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},v.prototype.emptyThrash=function(e){var t=this;this._discoveryService.getInfoObject("trash",function(n,r){if(n){e(n,r);return}t._connectionManager.request("DELETE",r._href,"",{},e)})},v.prototype.loadObjectStateGroups=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ObjectStateGroupList+json"},t)},v.prototype.loadObjectStateGroup=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ObjectStateGroup+json"},t)},v.prototype.createObjectStateGroup=function(e,t,n){this._connectionManager.request("POST",e,JSON.stringify(t.body),t.headers,n)},v.prototype.updateObjectStateGroup=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},v.prototype.deleteObjectStateGroup=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},v.prototype.createObjectState=function(e,t,n){this._connectionManager.request("POST",e+"/objectstates",JSON.stringify(t.body),t.headers,n)},v.prototype.loadObjectState=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ObjectState+json"},t)},v.prototype.updateObjectState=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},v.prototype.deleteObjectState=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},v.prototype.getContentState=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ContentObjectStates+json"},t)},v.prototype.setContentState=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t),{Accept:"application/vnd.ez.api.ContentObjectStates+json","Content-Type":"application/vnd.ez.api.ContentObjectStates+json"},n)},v.prototype.createUrlAlias=function(e,t,n){this._connectionManager.request("POST",e,JSON.stringify(t.body),t.headers,n)},v.prototype.listGlobalAliases=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.UrlAliasRefList+json"},t)},v.prototype.listLocationAliases=function(e,t,n){var r;arguments.length<3&&(n=t,t=!0),r=t===!0?"":"?custom=false",this._connectionManager.request("GET",e+"/urlaliases"+r,"",{Accept:"application/vnd.ez.api.UrlAliasRefList+json"},n)},v.prototype.loadUrlAlias=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.UrlAlias+json"},t)},v.prototype.deleteUrlAlias=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},v.prototype.createUrlWildcard=function(e,t,n){this._connectionManager.request("POST",e,JSON.stringify(t.body),t.headers,n)},v.prototype.loadUrlWildcards=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.UrlWildcardList+json"},t)},v.prototype.loadUrlWildcard=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.UrlWildcard+json"},t)},v.prototype.deleteUrlWildcard=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},v.prototype.loadImageVariation=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ContentImageVariation+json"},t)},v}),n("structures/ContentTypeGroupInputStruct",[],function(){var e=function(e){return this.body={},this.body.ContentTypeGroupInput={},this.body.ContentTypeGroupInput.identifier=e,this.headers={},this.headers.Accept="application/vnd.ez.api.ContentTypeGroup+json",this.headers["Content-Type"]="application/vnd.ez.api.ContentTypeGroupInput+json",this};return e}),n("structures/ContentTypeCreateStruct",[],function(){var e=function(e,t,n){var r=JSON.parse(JSON.stringify(new Date));return this.body={},this.body.ContentTypeCreate={},this.body.ContentTypeCreate.identifier=e,this.body.ContentTypeCreate.names={},this.body.ContentTypeCreate.names.value=n,this.body.ContentTypeCreate.nameSchema="&lt;title&gt;",this.body.ContentTypeCreate.urlAliasSchema="&lt;title&gt;",this.body.ContentTypeCreate.remoteId=null,this.body.ContentTypeCreate.mainLanguageCode=t,this.body.ContentTypeCreate.isContainer="true",this.body.ContentTypeCreate.modificationDate=r,this.body.ContentTypeCreate.defalutAlwaysAvailable="true",this.body.ContentTypeCreate.defalutSortField="PATH",this.body.ContentTypeCreate.defalutSortOrder="ASC",this.body.ContentTypeCreate.FieldDefinitions={},this.body.ContentTypeCreate.FieldDefinitions.FieldDefinition=[],this.headers={},this.headers.Accept="application/vnd.ez.api.ContentType+json",this.headers["Content-Type"]="application/vnd.ez.api.ContentTypeCreate+json",this};return e}),n("structures/ContentTypeUpdateStruct",[],function(){var e=function(){return this.body={},this.body.ContentTypeUpdate={},this.headers={},this.headers.Accept="application/vnd.ez.api.ContentType+json",this.headers["Content-Type"]="application/vnd.ez.api.ContentTypeUpdate+json",this};return e}),n("structures/FieldDefinitionCreateStruct",[],function(){var e=function(e,t,n,r){return this.body={},this.body.FieldDefinitionCreate={},this.body.FieldDefinitionCreate.identifier=e,this.body.FieldDefinitionCreate.fieldType=t,this.body.FieldDefinitionCreate.fieldGroup=n,this.body.FieldDefinitionCreate.position=1,this.body.FieldDefinitionCreate.isTranslatable="true",this.body.FieldDefinitionCreate.isRequired="false",this.body.FieldDefinitionCreate.isInfoCollector="false",this.body.FieldDefinitionCreate.isSearchable="false",this.body.FieldDefinitionCreate.defaultValue="false",this.body.FieldDefinitionCreate.names={},this.body.FieldDefinitionCreate.names.value=r,this.body.FieldDefinitionCreate.descriptions={},this.body.FieldDefinitionCreate.descriptions.value=[],this.headers={},this.headers.Accept="application/vnd.ez.api.FieldDefinition+json",this.headers["Content-Type"]="application/vnd.ez.api.FieldDefinitionCreate+json",this};return e}),n("structures/FieldDefinitionUpdateStruct",[],function(){var e=function(){return this.body={},this.body.FieldDefinitionUpdate={},this.headers={},this.headers.Accept="application/vnd.ez.api.FieldDefinition+json",this.headers["Content-Type"]="application/vnd.ez.api.FieldDefinitionUpdate+json",this};return e}),n("services/ContentTypeService",["structures/ContentTypeGroupInputStruct","structures/ContentTypeCreateStruct","structures/ContentTypeUpdateStruct","structures/FieldDefinitionCreateStruct","structures/FieldDefinitionUpdateStruct","utils/uriparse"],function(e,t,n,r,i,s){var o=function(e,t){this._connectionManager=e,this._discoveryService=t};return o.prototype.newContentTypeGroupInputStruct=function(t){return new e(t)},o.prototype.newContentTypeCreateStruct=function(e,n,r){return new t(e,n,r)},o.prototype.newContentTypeUpdateStruct=function(){return new n},o.prototype.newFieldDefinitionCreateStruct=function(e,t,n,i){return new r(e,t,n,i)},o.prototype.newFieldDefinitionUpdateStruct=function(){return new i},o.prototype.createContentTypeGroup=function(e,t,n){this._connectionManager.request("POST",e,JSON.stringify(t.body),t.headers,n)},o.prototype.loadContentTypeGroups=function(e){var t=this;this._discoveryService.getInfoObject("contentTypeGroups",function(n,r){if(n){e(n);return}t._connectionManager.request("GET",r._href,"",{Accept:"application/vnd.ez.api.ContentTypeGroupList+json"},e)})},o.prototype.loadContentTypeGroup=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ContentTypeGroup+json"},t)},o.prototype.updateContentTypeGroup=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},o.prototype.deleteContentTypeGroup=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},o.prototype.loadContentTypes=function(e,t){var n=this;this.loadContentTypeGroup(e,function(e,r){if(e){t(e,r);return}var i=r.document.ContentTypeGroup;n._connectionManager.request("GET",i.ContentTypes._href,"",{Accept:i.ContentTypes["_media-type"]},t)})},o.prototype.loadContentTypeGroupByIdentifier=function(e,t,n){this._connectionManager.request("GET",e+"?identifier="+t,"",{Accept:"application/vnd.ez.api.ContentTypeGroup+json"},n)},o.prototype.createContentType=function(e,t,n,r){var i=this;this.loadContentTypeGroup(e,function(e,s){if(e){r(e,s);return}var o=s.document.ContentTypeGroup,u=n===!0?"?publish=true":"";i._connectionManager.request("POST",o.ContentTypes._href+u,JSON.stringify(t.body),t.headers,r)})},o.prototype.copyContentType=function(e,t){this._connectionManager.request("COPY",e,"",{},t)},o.prototype.loadContentType=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.ContentType+json"},t)},o.prototype.loadContentTypeByIdentifier=function(e,t){var n=this;this._discoveryService.getInfoObject("contentTypeByIdentifier",function(r,i){if(r){t(r,i);return}n._connectionManager.request("GET",s(i._href,{identifier:e}),"",{Accept:"application/vnd.ez.api.ContentTypeInfoList+json"},t)})},o.prototype.deleteContentType=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},o.prototype.loadGroupsOfContentType=function(e,t){this._connectionManager.request("GET",e+"/groups","",{Accept:"application/vnd.ez.api.ContentTypeGroupRefList+json"},t)},o.prototype.assignContentTypeGroup=function(e,t,n){this._connectionManager.request("POST",e+"/groups"+"?group="+t,"",{},n)},o.prototype.unassignContentTypeGroup=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},o.prototype.createContentTypeDraft=function(e,t,n){this._connectionManager.request("POST",e,JSON.stringify(t.body),t.headers,n)},o.prototype.loadContentTypeDraft=function(e,t){this._connectionManager.request("GET",e+"/draft","",{Accept:"application/vnd.ez.api.ContentType+json"},t)},o.prototype.updateContentTypeDraftMetadata=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},o.prototype.publishContentTypeDraft=function(e,t){this._connectionManager.request("PUBLISH",e,"",{},t)},o.prototype.deleteContentTypeDraft=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},o.prototype.addFieldDefinition=function(e,t,n){var r=this;this.loadContentTypeDraft(e,function(e,i){if(e){n(e,i);return}var s=i.document.ContentType.FieldDefinitions;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},o.prototype.loadFieldDefinition=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.FieldDefinition+json"},t)},o.prototype.updateFieldDefinition=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},o.prototype.deleteFieldDefinition=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},o}),n("structures/SessionCreateStruct",[],function(){var e=function(e,t){return this.body={},this.body.SessionInput={},this.body.SessionInput.login=e,this.body.SessionInput.password=t,this.headers={Accept:"application/vnd.ez.api.Session+json","Content-Type":"application/vnd.ez.api.SessionInput+json"},this};return e}),n("structures/UserCreateStruct",[],function(){var e=function(e,t,n,r,i){return this.body={},this.body.UserCreate={},this.body.UserCreate.mainLanguageCode=e,this.body.UserCreate.login=t,this.body.UserCreate.email=n,this.body.UserCreate.password=r,this.body.UserCreate.fields={},this.body.UserCreate.fields.field=i,this.headers={},this.headers.Accept="application/vnd.ez.api.User+json",this.headers["Content-Type"]="application/vnd.ez.api.UserCreate+json",this};return e}),n("structures/UserUpdateStruct",[],function(){var e=function(){return this.body={},this.body.UserUpdate={},this.body.UserUpdate.fields={},this.body.UserUpdate.fields.field=[],this.headers={},this.headers.Accept="application/vnd.ez.api.User+json",this.headers["Content-Type"]="application/vnd.ez.api.UserUpdate+json",this};return e}),n("structures/UserGroupCreateStruct",[],function(){var e=function(e,t){return this.body={},this.body.UserGroupCreate={},this.body.UserGroupCreate.mainLanguageCode=e,this.body.UserGroupCreate.fields={},this.body.UserGroupCreate.fields.field=t,this.headers={},this.headers.Accept="application/vnd.ez.api.UserGroup+json",this.headers["Content-Type"]="application/vnd.ez.api.UserGroupCreate+json",this};return e}),n("structures/UserGroupUpdateStruct",[],function(){var e=function(e,t){return this.body={},this.body.UserGroupUpdate={},this.body.UserGroupUpdate.fields={},this.body.UserGroupUpdate.fields.field=[],this.headers={},this.headers.Accept="application/vnd.ez.api.UserGroup+json",this.headers["Content-Type"]="application/vnd.ez.api.UserGroupUpdate+json",this};return e}),n("structures/PolicyCreateStruct",[],function(){var e=function(e,t,n){return this.body={},this.body.PolicyCreate={},this.body.PolicyCreate.module=e,this.body.PolicyCreate.function=t,this.body.PolicyCreate.limitations={},this.body.PolicyCreate.limitations.limitation=n,this.headers={},this.headers.Accept="application/vnd.ez.api.Policy+json",this.headers["Content-Type"]="application/vnd.ez.api.PolicyCreate+json",this};return e}),n("structures/PolicyUpdateStruct",[],function(){var e=function(e){return this.body={},this.body.PolicyUpdate={},this.body.PolicyUpdate.limitations={},this.body.PolicyUpdate.limitations.limitation=e,this.headers={},this.headers.Accept="application/vnd.ez.api.Policy+json",this.headers["Content-Type"]="application/vnd.ez.api.PolicyUpdate+json",this};return e}),n("structures/RoleInputStruct",[],function(){var e=function(e){return this.body={},this.body.RoleInput={},this.body.RoleInput.identifier=e,this.headers={},this.headers.Accept="application/vnd.ez.api.Role+json",this.headers["Content-Type"]="application/vnd.ez.api.RoleInput+json",this};return e}),n("structures/RoleAssignInputStruct",[],function(){var e=function(e,t){return this.body={},this.body.RoleAssignInput={},this.body.RoleAssignInput.Role=e,this.body.RoleAssignInput.limitation=t,this.headers={},this.headers.Accept="application/vnd.ez.api.RoleAssignmentList+json",this.headers["Content-Type"]="application/vnd.ez.api.RoleAssignInput+json",this};return e}),n("services/UserService",["structures/SessionCreateStruct","structures/UserCreateStruct","structures/UserUpdateStruct","structures/UserGroupCreateStruct","structures/UserGroupUpdateStruct","structures/PolicyCreateStruct","structures/PolicyUpdateStruct","structures/RoleInputStruct","structures/RoleAssignInputStruct","utils/uriparse"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e,t,n){this._connectionManager=e,this._discoveryService=t,this._rootPath=n};return l.prototype.newSessionCreateStruct=function(t,n){return new e(t,n)},l.prototype.newUserGroupCreateStruct=function(e,t){return new r(e,t)},l.prototype.newUserGroupUpdateStruct=function(){return new i},l.prototype.newUserCreateStruct=function(e,n,r,i,s){return new t(e,n,r,i,s)},l.prototype.newUserUpdateStruct=function(){return new n},l.prototype.newRoleInputStruct=function(e){return new u(e)},l.prototype.newRoleAssignInputStruct=function(e,t){return new a(e,t)},l.prototype.newPolicyCreateStruct=function(e,t,n){return new s(e,t,n)},l.prototype.newPolicyUpdateStruct=function(e){return new o(e)},l.prototype.loadRootUserGroup=function(e){var t=this;this._discoveryService.getInfoObject("rootUserGroup",function(n,r){if(n){e(n,r);return}t._connectionManager.request("GET",r._href,"",{Accept:r["_media-type"]},e)})},l.prototype.loadUserGroup=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.UserGroup+json"},t)},l.prototype.loadUserGroupByRemoteId=function(e,t,n){this._connectionManager.request("GET",e+"?remoteId="+t,"",{Accept:"application/vnd.ez.api.UserGroupList+json"},n)},l.prototype.deleteUserGroup=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},l.prototype.moveUserGroup=function(e,t,n){this._connectionManager.request("MOVE",e,"",{Destination:t},n)},l.prototype.createUserGroup=function(e,t,n){var r=this;this.loadUserGroup(e,function(e,i){if(e){n(e,i);return}var s=i.document.UserGroup.Subgroups;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},l.prototype.updateUserGroup=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},l.prototype.loadSubUserGroups=function(e,t){var n=this;this.loadUserGroup(e,function(e,r){if(e){t(e,r);return}var i=r.document.UserGroup.Subgroups;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},l.prototype.loadUsersOfUserGroup=function(e,t){var n=this;this.loadUserGroup(e,function(e,r){if(e){t(e,r);return}var i=r.document.UserGroup.Users;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},l.prototype.loadUserGroupsOfUser=function(e,t){this._connectionManager.request("GET",e+"/groups","",{Accept:"application/vnd.ez.api.UserGroupRefList+json"},t)},l.prototype.createUser=function(e,t,n){var r=this;this.loadUserGroup(e,function(e,i){if(e){n(e,i);return}var s=i.document.UserGroup.Users;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},l.prototype.getRoleAssignments=function(e,t){var n=this;this._discoveryService.getInfoObject("users",function(r,i){if(r){t(r,i);return}n._connectionManager.request("GET",i._href+"?roleId="+e,"",{Accept:"application/vnd.ez.api.UserList+json"},t)})},l.prototype.loadUser=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.User+json"},t)},l.prototype.updateUser=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},l.prototype.deleteUser=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},l.prototype.assignUserToUserGroup=function(e,t,n){var r=this;this.loadUser(e,function(e,i){if(e){n(e,i);return}var s=i.document.User.UserGroups;r._connectionManager.request("POST",s._href+"?group="+t,"",{Accept:s["_media-type"]},n)})},l.prototype.unassignUserFromUserGroup=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},l.prototype.createRole=function(e,t){var n=this;this._discoveryService.getInfoObject("roles",function(r,i){if(r){t(r,i);return}n._connectionManager.request("POST",i._href,JSON.stringify(e.body),e.headers,t)})},l.prototype.loadRole=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Role+json"},t)},l.prototype.loadRoles=function(e,t,n,r){var i=this,s,o="",u=-1,a=0;arguments.length<4&&(typeof e=="function"?(r=e,e=o,t=u,n=a):typeof t=="function"?(r=t,t=u,n=a):(r=n,n=a)),s=e===""?"":"&identifier="+e,this._discoveryService.getInfoObject("roles",function(e,o){if(e){r(e,o);return}i._connectionManager.request("GET",o._href+"?offset="+n+"&limit="+t+s,"",{Accept:o["_media-type"]},r)})},l.prototype.updateRole=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},l.prototype.deleteRole=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},l.prototype.getRoleAssignmentsForUser=function(e,t){var n=this;this.loadUser(e,function(e,r){if(e){t(e,r);return}var i=r.document.User.Roles;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},l.prototype.getRoleAssignmentsForUserGroup=function(e,t){var n=this;this.loadUserGroup(e,function(e,r){if(e){t(e,r);return}var i=r.document.UserGroup.Roles;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},l.prototype.getUserAssignmentObject=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.RoleAssignment+json"},t)},l.prototype.getUserGroupAssignmentObject=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.RoleAssignment+json"},t)},l.prototype.assignRoleToUser=function(e,t,n){var r=this;this.loadUser(e,function(e,i){if(e){n(e,i);return}var s=i.document.User.Roles;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},l.prototype.assignRoleToUserGroup=function(e,t,n){var r=this;this.loadUserGroup(e,function(e,i){if(e){n(e,i);return}var s=i.document.UserGroup.Roles;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},l.prototype.unassignRoleFromUser=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},l.prototype.unassignRoleFromUserGroup=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},l.prototype.addPolicy=function(e,t,n){var r=this;this.loadRole(e,function(e,i){if(e){n(e,i);return}var s=i.document.Role.Policies;r._connectionManager.request("POST",s._href,JSON.stringify(t.body),t.headers,n)})},l.prototype.loadPolicies=function(e,t){var n=this;this.loadRole(e,function(e,r){if(e){t(e,r);return}var i=r.document.Role.Policies;n._connectionManager.request("GET",i._href,"",{Accept:i["_media-type"]},t)})},l.prototype.loadPolicy=function(e,t){this._connectionManager.request("GET",e,"",{Accept:"application/vnd.ez.api.Policy+json"},t)},l.prototype.updatePolicy=function(e,t,n){this._connectionManager.request("PATCH",e,JSON.stringify(t.body),t.headers,n)},l.prototype.deletePolicy=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},l.prototype.loadPoliciesByUserId=function(e,t,n){this._connectionManager.request("GET",e+"?userId="+t,"",{Accept:"application/vnd.ez.api.PolicyList+json"},n)},l.prototype.createSession=function(e,t){var n=this;this._connectionManager.notAuthorizedRequest("GET",this._rootPath,"",{Accept:"application/vnd.ez.api.Root+json"},function(r,i){if(r){t(r,i);return}n._connectionManager.notAuthorizedRequest("POST",i.document.Root.createSession._href,JSON.stringify(e.body),e.headers,t)})},l.prototype.refreshSession=function(e,t){var n=this;this._discoveryService.getInfoObject("refreshSession",function(r,i){if(r){t(r,i);return}n._connectionManager.request("POST",f(i._href,{sessionId:e}),"",{Accept:i["_media-type"]},t)})},l.prototype.deleteSession=function(e,t){this._connectionManager.request("DELETE",e,"",{},t)},l}),n("utils/extend",[],function(){var e=function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){var n;if(typeof t!="object")return;for(n in t)t.hasOwnProperty(n)&&t[n]!==undefined&&(e[n]=t[n])}),e};return e}),n("CAPI",["authAgents/SessionAuthAgent","authAgents/HttpBasicAuthAgent","ConnectionManager","ConnectionFeatureFactory","connections/XmlHttpRequestConnection","connections/MicrosoftXmlHttpRequestConnection","services/DiscoveryService","services/ContentService","services/ContentTypeService","services/UserService","utils/extend"],function(e,t,n,r,i,s,o,u,a,f,l){var c=function(e,t,c){var h,p,d,v,m,g,y,b;h={logRequests:!1,rootPath:"/api/ezp/v2/",connectionStack:[{connection:i},{connection:s}]},t.setCAPI(this),p=l({},h,c),d=new r(p.connectionStack),v=new n(e,t,d),v.logRequests=p.logRequests,m=new o(p.rootPath,v),this.isLoggedIn=function(e){t.isLoggedIn(e)},this.logIn=function(e,n){n?t.setCredentials(e):n=e,t.logIn(n)},this.logOut=function(e){t.logOut(e)},this.getContentService=function(){return g||(g=new u(v,m,p.rootPath)),g},this.getContentTypeService=function(){return y||(y=new a(v,m)),y},this.getUserService=function(){return b||(b=new f(v,m,p.rootPath)),b}};return c}),function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof exports=="object")module.exports=e();else if(typeof n=="function"&&n.amd)n("services/../../node_modules/q/q",e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){function u(e){return function(){return o.apply(e,arguments)}}function m(e){return e===Object(e)}function g(e){return v(e)==="[object StopIteration]"||e instanceof y}function E(t,n){if(e&&n.stack&&typeof t=="object"&&t!==null&&t.stack&&t.stack.indexOf(w)===-1){var r=[];for(var i=n;!!i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(t.stack);var s=r.join("\n"+w+"\n");t.stack=S(s)}}function S(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!N(i)&&!x(i)&&i&&n.push(i)}return n.join("\n")}function x(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function T(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);if(r)return[r[1],Number(r[2])]}function N(e){var t=T(e);if(!t)return!1;var i=t[0],s=t[1];return i===r&&s>=n&&s<=lt}function C(){if(!e)return;try{throw new Error}catch(t){var n=t.stack.split("\n"),i=n[0].indexOf("@")>0?n[1]:n[2],s=T(i);if(!s)return;return r=s[0],s[1]}}function k(e,t,n){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack),e.apply(e,arguments)}}function L(e){return H(e)?e:B(e)?G(e):Q(e)}function A(){function l(e){r=e,o.source=e,f(t,function(t,n){s(function(){e.promiseDispatch.apply(e,n)})},void 0),t=void 0,n=void 0}var t=[],n=[],r,i=h(A.prototype),o=h(_.prototype);o.promiseDispatch=function(e,i,o){var u=a(arguments);t?(t.push(u),i==="when"&&o[1]&&n.push(o[1])):s(function(){r.promiseDispatch.apply(r,u)})},o.valueOf=k(function(){if(t)return o;var e=P(r);return H(e)&&(r=e),e},"valueOf","inspect"),o.inspect=function(){return r?r.inspect():{state:"pending"}};if(L.longStackSupport&&e)try{throw new Error}catch(u){o.stack=u.stack.substring(u.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(e){if(r)return;l(L(e))},i.fulfill=function(e){if(r)return;l(Q(e))},i.reject=function(e){if(r)return;l(K(e))},i.notify=function(e){if(r)return;f(n,function(t,n){s(function(){n(e)})},void 0)},i}function O(e){if(typeof e!="function")throw new TypeError("resolver must be a function.");var t=A();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function M(e){return O(function(t,n){for(var r=0,i=e.length;r<i;r++)L(e[r]).then(t,n)})}function _(e,t,n){t===void 0&&(t=function(e){return K(new Error("Promise does not support operation: "+e))}),n===void 0&&(n=function(){return{state:"unknown"}});var r=h(_.prototype);r.promiseDispatch=function(n,i,s){var o;try{e[i]?o=e[i].apply(r,s):o=t.call(r,i,s)}catch(u){o=K(u)}n&&n(o)},r.inspect=n;if(n){var i=n();i.state==="rejected"&&(r.exception=i.reason),r.valueOf=k(function(){var e=n();return e.state==="pending"||e.state==="rejected"?r:e.value})}return r}function D(e,t,n,r){return L(e).then(t,n,r)}function P(e){if(H(e)){var t=e.inspect();if(t.state==="fulfilled")return t.value}return e}function H(e){return m(e)&&typeof e.promiseDispatch=="function"&&typeof e.inspect=="function"}function B(e){return m(e)&&typeof e.then=="function"}function j(e){return H(e)&&e.inspect().state==="pending"}function F(e){return!H(e)||e.inspect().state==="fulfilled"}function I(e){return H(e)&&e.inspect().state==="rejected"}function W(){!U&&typeof window!="undefined"&&!window.Touch&&window.console&&console.warn("[Q] Unhandled rejection reasons (should be empty):",q),U=!0}function X(){for(var e=0;e<q.length;e++){var t=q[e];console.warn("Unhandled rejection reason:",t)}}function V(){q.length=0,R.length=0,U=!1,z||(z=!0,typeof process!="undefined"&&process.on&&process.on("exit",X))}function $(e,t){if(!z)return;R.push(e),t&&typeof t.stack!="undefined"?q.push(t.stack):q.push("(no stack) "+t),W()}function J(e){if(!z)return;var t=l(R,e);t!==-1&&(R.splice(t,1),q.splice(t,1))}function K(e){var t=_({when:function(t){return t&&J(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return $(t,e),t}function Q(e){return _({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return t===null||t===void 0?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return d(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function G(e){var t=A();return s(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function Y(e){return _({isDef:function(){}},function(n,r){return it(e,n,r)},function(){return L(e).inspect()})}function Z(e,t,n){return L(e).spread(t,n)}function et(e){return function(){function t(e,t){var s;if(b){try{s=n[e](t)}catch(o){return K(o)}return s.done?s.value:D(s.value,r,i)}try{s=n[e](t)}catch(o){return g(o)?o.value:K(o)}return D(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"next"),i=t.bind(t,"throw");return r()}}function tt(e){L.done(L.async(e)())}function nt(e){throw new y(e)}function rt(e){return function(){return Z([this,st(arguments)],function(t,n){return e.apply(t,n)})}}function it(e,t,n){return L(e).dispatch(t,n)}function st(e){return D(e,function(e){var t=0,n=A();return f(e,function(r,i,s){var o;H(i)&&(o=i.inspect()).state==="fulfilled"?e[s]=o.value:(++t,D(i,function(r){e[s]=r,--t===0&&n.resolve(e)},n.reject,function(e){n.notify({index:s,value:e})}))},void 0),t===0&&n.resolve(e),n.promise})}function ot(e){return D(e,function(e){return e=c(e,L),D(st(c(e,function(e){return D(e,i,i)})),function(){return e})})}function ut(e){return L(e).allSettled()}function at(e,t){return L(e).then(void 0,void 0,t)}function ft(e,t){return L(e).nodeify(t)}var e=!1;try{throw new Error}catch(t){e=!!t.stack}var n=C(),r,i=function(){},s=function(){function o(){while(e.next){e=e.next;var t=e.task;e.task=void 0;var r=e.domain;r&&(e.domain=void 0,r.enter());try{t()}catch(s){if(i)throw r&&r.exit(),setTimeout(o,0),r&&r.enter(),s;setTimeout(function(){throw s},0)}r&&r.exit()}n=!1}var e={task:void 0,next:null},t=e,n=!1,r=void 0,i=!1;s=function(e){t=t.next={task:e,domain:i&&process.domain,next:null},n||(n=!0,r())};if(typeof process!="undefined"&&process.nextTick)i=!0,r=function(){process.nextTick(o)};else if(typeof setImmediate=="function")typeof window!="undefined"?r=setImmediate.bind(window,o):r=function(){setImmediate(o)};else if(typeof MessageChannel!="undefined"){var u=new MessageChannel;u.port1.onmessage=function(){r=a,u.port1.onmessage=o,o()};var a=function(){u.port2.postMessage(0)};r=function(){setTimeout(o,0),a()}}else r=function(){setTimeout(o,0)};return s}(),o=Function.call,a=u(Array.prototype.slice),f=u(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),l=u(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),c=u(Array.prototype.map||function(e,t){var n=this,r=[];return f(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),h=Object.create||function(e){function t(){}return t.prototype=e,new t},p=u(Object.prototype.hasOwnProperty),d=Object.keys||function(e){var t=[];for(var n in e)p(e,n)&&t.push(n);return t},v=u(Object.prototype.toString),y;typeof ReturnValue!="undefined"?y=ReturnValue:y=function(e){this.value=e};var b;try{new Function("(function* (){ yield 1; })"),b=!0}catch(t){b=!1}var w="From previous event:";L.resolve=L,L.nextTick=s,L.longStackSupport=!1,L.defer=A,A.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(a(arguments,1)):e.resolve(n)}},L.promise=O,L.passByCopy=function(e){return e},_.prototype.passByCopy=function(){return this},L.join=function(e,t){return L(e).join(t)},_.prototype.join=function(e){return L([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},L.race=M,_.prototype.race=function(){return this.then(L.race)},L.makePromise=_,_.prototype.toString=function(){return"[object Promise]"},_.prototype.then=function(e,t,n){function u(t){try{return typeof e=="function"?e(t):t}catch(n){return K(n)}}function a(e){if(typeof t=="function"){E(e,r);try{return t(e)}catch(n){return K(n)}}return K(e)}function f(e){return typeof n=="function"?n(e):e}var r=this,i=A(),o=!1;return s(function(){r.promiseDispatch(function(e){if(o)return;o=!0,i.resolve(u(e))},"when",[function(e){if(o)return;o=!0,i.resolve(a(e))}])}),r.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=f(e)}catch(r){n=!0;if(!L.onerror)throw r;L.onerror(r)}n||i.notify(t)}]),i.promise},L.when=D,_.prototype.thenResolve=function(e){return this.then(function(){return e})},L.thenResolve=function(e,t){return L(e).thenResolve(t)},_.prototype.thenReject=function(e){return this.then(function(){throw e})},L.thenReject=function(e,t){return L(e).thenReject(t)},L.nearer=P,L.isPromise=H,L.isPromiseAlike=B,L.isPending=j,_.prototype.isPending=function(){return this.inspect().state==="pending"},L.isFulfilled=F,_.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},L.isRejected=I,_.prototype.isRejected=function(){return this.inspect().state==="rejected"};var q=[],R=[],U=!1,z=!0;L.resetUnhandledRejections=V,L.getUnhandledReasons=function(){return q.slice()},L.stopUnhandledRejectionTracking=function(){V(),typeof process!="undefined"&&process.on&&process.removeListener("exit",X),z=!1},V(),L.reject=K,L.fulfill=Q,L.master=Y,L.spread=Z,_.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},L.async=et,L.spawn=tt,L["return"]=nt,L.promised=rt,L.dispatch=it,_.prototype.dispatch=function(e,t){var n=this,r=A();return s(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},L.get=function(e,t){return L(e).dispatch("get",[t])},_.prototype.get=function(e){return this.dispatch("get",[e])},L.set=function(e,t,n){return L(e).dispatch("set",[t,n])},_.prototype.set=function(e,t){return this.dispatch("set",[e,t])},L.del=L["delete"]=function(e,t){return L(e).dispatch("delete",[t])},_.prototype.del=_.prototype["delete"]=function(e){return this.dispatch("delete",[e])},L.mapply=L.post=function(e,t,n){return L(e).dispatch("post",[t,n])},_.prototype.mapply=_.prototype.post=function(e,t){return this.dispatch("post",[e,t])},L.send=L.mcall=L.invoke=function(e,t){return L(e).dispatch("post",[t,a(arguments,2)])},_.prototype.send=_.prototype.mcall=_.prototype.invoke=function(e){return this.dispatch("post",[e,a(arguments,1)])},L.fapply=function(e,t){return L(e).dispatch("apply",[void 0,t])},_.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},L["try"]=L.fcall=function(e){return L(e).dispatch("apply",[void 0,a(arguments,1)])},_.prototype.fcall=function(){return this.dispatch("apply",[void 0,a(arguments)])},L.fbind=function(e){var t=L(e),n=a(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(a(arguments))])}},_.prototype.fbind=function(){var e=this,t=a(arguments);return function(){return e.dispatch("apply",[this,t.concat(a(arguments))])}},L.keys=function(e){return L(e).dispatch("keys",[])},_.prototype.keys=function(){return this.dispatch("keys",[])},L.all=st,_.prototype.all=function(){return st(this)},L.allResolved=k(ot,"allResolved","allSettled"),_.prototype.allResolved=function(){return ot(this)},L.allSettled=ut,_.prototype.allSettled=function(){return this.then(function(e){return st(c(e,function(e){function t(){return e.inspect()}return e=L(e),e.then(t,t)}))})},L.fail=L["catch"]=function(e,t){return L(e).then(void 0,t)},_.prototype.fail=_.prototype["catch"]=function(e){return this.then(void 0,e)},L.progress=at,_.prototype.progress=function(e){return this.then(void 0,void 0,e)},L.fin=L["finally"]=function(e,t){return L(e)["finally"](t)},_.prototype.fin=_.prototype["finally"]=function(e){return e=L(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},L.done=function(e,t,n,r){return L(e).done(t,n,r)},_.prototype.done=function(e,t,n){var r=function(e){s(function(){E(e,i);if(!L.onerror)throw e;L.onerror(e)})},i=e||t||n?this.then(e,t,n):this;typeof process=="object"&&process&&process.domain&&(r=process.domain.bind(r)),i.then(void 0,r)},L.timeout=function(e,t,n){return L(e).timeout(t,n)},_.prototype.timeout=function(e,t){var n=A(),r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},L.delay=function(e,t){return t===void 0&&(t=e,e=void 0),L(e).delay(t)},_.prototype.delay=function(e){return this.then(function(t){var n=A();return setTimeout(function(){n.resolve(t)},e),n.promise})},L.nfapply=function(e,t){return L(e).nfapply(t)},_.prototype.nfapply=function(e){var t=A(),n=a(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},L.nfcall=function(e){var t=a(arguments,1);return L(e).nfapply(t)},_.prototype.nfcall=function(){var e=a(arguments),t=A();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},L.nfbind=L.denodeify=function(e){var t=a(arguments,1);return function(){var n=t.concat(a(arguments)),r=A();return n.push(r.makeNodeResolver()),L(e).fapply(n).fail(r.reject),r.promise}},_.prototype.nfbind=_.prototype.denodeify=function(){var e=a(arguments);return e.unshift(this),L.denodeify.apply(void 0,e)},L.nbind=function(e,t){var n=a(arguments,2);return function(){function s(){return e.apply(t,arguments)}var r=n.concat(a(arguments)),i=A();return r.push(i.makeNodeResolver()),L(s).fapply(r).fail(i.reject),i.promise}},_.prototype.nbind=function(){var e=a(arguments,0);return e.unshift(this),L.nbind.apply(void 0,e)},L.nmapply=L.npost=function(e,t,n){return L(e).npost(t,n)},_.prototype.nmapply=_.prototype.npost=function(e,t){var n=a(t||[]),r=A();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},L.nsend=L.nmcall=L.ninvoke=function(e,t){var n=a(arguments,2),r=A();return n.push(r.makeNodeResolver()),L(e).dispatch("post",[t,n]).fail(r.reject),r.promise},_.prototype.nsend=_.prototype.nmcall=_.prototype.ninvoke=function(e){var t=a(arguments,1),n=A();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},L.nodeify=ft,_.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){s(function(){e(null,t)})},function(t){s(function(){e(t)})})};var lt=C();return L}),n("services/PromiseService",["../../node_modules/q/q","structures/CAPIError"],function(e,t){var n=function(n){var r,i,s;i=function(e){return function(){return e.apply(n,Array.prototype.slice(arguments))}},s=function(r){return function(){var i=Array.prototype.slice.call(arguments),s=e.defer();if(r.length-1!==arguments.length)throw new t("Wrong number of arguments provided for promise-based function.");return i.push(function(e,t){e?s.reject(e):s.resolve(t)}),r.apply(n,i),s.promise}};for(r in n){if(typeof n[r]!="function")continue;switch(!0){case/^_/.test(r):break;case/^(new[^\s(]+Struct)/.test(r):this[r]=i(n[r]);break;default:this[r]=s(n[r])}}};return n}),n("PromiseCAPI",["CAPI","services/PromiseService"],function(e,t){var n=function(e){var n,r,i,s;r={},i=function(n){return function(){return r[n]||(r[n]=new t(e[n].call(e))),r[n]}},s=function(t){return function(){return e[t].apply(e,Array.prototype.slice.call(arguments))}};for(n in e){if(typeof e[n]!="function")continue;switch(!0){case/^_/.test(n):break;case/^(get[^\s(]+Service)/.test(n):this[n]=i(n);break;default:this[n]=s(n)}}};return n}),window.eZ=window.eZ||{},window.eZ.HttpBasicAuthAgent=t("authAgents/HttpBasicAuthAgent"),window.eZ.SessionAuthAgent=t("authAgents/SessionAuthAgent"),window.eZ.CAPI=t("CAPI"),window.eZ.PromiseCAPI=t("PromiseCAPI")});